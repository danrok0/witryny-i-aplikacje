================================================================================
PODSUMOWANIE KODU PROJEKTU - SYSTEM REKOMENDACJI TRAS TURYSTYCZNYCH
================================================================================

üìÖ DATA UTWORZENIA: 2024-12-12
üéØ OPIS: Kompletny kod wszystkich plik√≥w projektu w jednym miejscu
üîß AUTOR: System rekomendacji tras turystycznych - Etap 4

================================================================================
üìÅ STRUKTURA PROJEKTU
================================================================================

Projekt zawiera nastƒôpujƒÖce pliki Python:
- 40 plik√≥w .py (bez __pycache__)
- G≈Ç√≥wne modu≈Çy: main.py, config.py, database/, analyzers/, reporters/, extractors/
- Pliki danych: JSON, SQL schema
- Narzƒôdzia: manage_cache.py, check_stats.py

================================================================================
üöÄ G≈Å√ìWNE PLIKI APLIKACJI
================================================================================

################################################################################
# PLIK: main.py (G≈Ç√≥wny plik aplikacji)
# ≈öCIE≈ªKA: ./main.py
# ROZMIAR: ~1549 linii
################################################################################

#!/usr/bin/env python3
"""
G≈Ç√≥wny plik systemu rekomendacji tras turystycznych z nowymi funkcjami.
"""

import os
import sys
import json
from datetime import datetime
from typing import List, Dict, Any

# G≈Ç√≥wne importy modu≈Ç√≥w projektu
from data_handlers.trail_data import TrailDataHandler
from data_handlers.weather_data import WeatherDataHandler
from utils.trail_filter import TrailFilter
from recommendation.trail_recommender import TrailRecommender
from config import CITY_COORDINATES

# G≈Å√ìWNE FUNKCJE:
# - display_main_menu(): Menu g≈Ç√≥wne aplikacji
# - standard_recommendations(): Standardowe rekomendacje tras
# - recommendations_with_pdf(): Rekomendacje z raportem PDF
# - analyze_specific_trail(): Analiza konkretnej trasy
# - browse_database_routes(): PrzeglƒÖdanie tras w bazie danych
# - main(): G≈Ç√≥wna funkcja aplikacji z menu

# Menu g≈Ç√≥wne oferuje 11 opcji:
# 1. Standardowe rekomendacje tras
# 2. Dodaj nowƒÖ trasƒô
# 3. Statystyki bazy danych
# 4. Utw√≥rz kopiƒô zapasowƒÖ
# 5. Importuj dane z plik√≥w
# 6. Rekomendacje z raportem PDF
# 7. Analiza konkretnej trasy
# 8. PrzeglƒÖdaj trasy w bazie danych
# 9. Zbieranie danych z internetu
# 10. Generowanie tylko wykres√≥w
# 11. Demonstracja przetwarzania tekstu

################################################################################
# PLIK: config.py (Konfiguracja systemu)
# ≈öCIE≈ªKA: ./config.py
# ROZMIAR: ~26 linii
################################################################################

"""
Configuration settings for the trail recommendation system.
"""
from typing import Dict

# API Endpoints
OPEN_METEO_API = "https://api.open-meteo.com/v1"
OVERPASS_API = "https://overpass-api.de/api/interpreter"

# City coordinates for weather data
CITY_COORDINATES: Dict[str, Dict[str, float]] = {
    "Gda≈Ñsk": {"lat": 54.3520, "lon": 18.6466},
    "Warszawa": {"lat": 52.2297, "lon": 21.0122},
    "Krak√≥w": {"lat": 50.0647, "lon": 19.9450},
    "Wroc≈Çaw": {"lat": 51.1079, "lon": 17.0385}
}

# Overpass API query template
OVERPASS_QUERY_TEMPLATE = """
[out:json][timeout:25];
area["name"="{city}"]["boundary"="administrative"]->.searchArea;
relation["type"="route"]["route"="hiking"](area.searchArea);
out body;
>;
out skel qt;
"""

================================================================================
üîç MODU≈Å ANALYZERS - ANALIZA TEKSTU I RECENZJI
================================================================================

################################################################################
# PLIK: analyzers/text_processor.py
# ≈öCIE≈ªKA: ./analyzers/text_processor.py
# ROZMIAR: ~310 linii
# OPIS: Ekstrakcja informacji z opis√≥w tras u≈ºywajƒÖc wyra≈ºe≈Ñ regularnych
################################################################################

import re
from typing import Dict, List, Optional, Any, Tuple
from dataclasses import dataclass

@dataclass
class ExtractedTrailInfo:
    """Struktura danych dla wyekstraktowanych informacji o trasie."""
    duration_minutes: Optional[int] = None
    elevation_gain: Optional[int] = None
    landmarks: List[str] = None
    warnings: List[str] = None
    coordinates: Optional[Tuple[str, str]] = None
    difficulty_level: Optional[str] = None
    recommended_season: Optional[str] = None

class TextProcessor:
    """Klasa do przetwarzania tekst√≥w opis√≥w tras i ekstrakcji informacji."""
    
    def __init__(self):
        """Inicjalizacja wzorc√≥w wyra≈ºe≈Ñ regularnych zgodnie z updatelist.txt."""
        self.patterns = {
            # Wzorce dla czasu przej≈õcia
            'duration': [
                re.compile(r'(\d+(?:\.\d+)?)\s*(?:h|godz|godzin|hours?)', re.IGNORECASE),
                re.compile(r'(\d+)\s*(?:min|minut)', re.IGNORECASE),
                re.compile(r'(\d+)\s*h\s*(\d+)\s*min', re.IGNORECASE)
            ],
            
            # Wzorce dla wysoko≈õci
            'elevation': [
                re.compile(r'(\d{3,4})\s*m\s*n\.?p\.?m\.?', re.IGNORECASE),
                re.compile(r'przewy≈ºszenie[:\s]*(\d{3,4})\s*m', re.IGNORECASE)
            ],
            
            # Wzorce dla wsp√≥≈Çrzƒôdnych GPS
            'coordinates': [
                re.compile(r'([NS]?\d{1,2}[¬∞¬∫]\d{1,2}[\'‚Ä≤]\d{1,2}[\"‚Ä≥]?)\s*,?\s*([EW]?\d{1,3}[¬∞¬∫]\d{1,2}[\'‚Ä≤]\d{1,2}[\"‚Ä≥]?)', re.IGNORECASE)
            ],
            
            # Wzorce dla punkt√≥w charakterystycznych
            'landmarks': [
                re.compile(r'(schronisko\s+\w+)', re.IGNORECASE),
                re.compile(r'(szczyt\s+\w+)', re.IGNORECASE),
                re.compile(r'(prze≈Çƒôcz\s+\w+)', re.IGNORECASE)
            ],
            
            # Wzorce dla ostrze≈ºe≈Ñ
            'warnings': [
                re.compile(r'uwaga[:\s]*([\w\s,]+(?:po\s+deszczu|≈õliskie|niebezpieczne)[\w\s]*)', re.IGNORECASE)
            ]
        }
    
    # G≈Å√ìWNE METODY:
    # - extract_duration(text): Wydobywa czas przej≈õcia
    # - extract_elevation(text): Wydobywa wysoko≈õƒá/przewy≈ºszenie
    # - extract_coordinates(text): Standaryzuje wsp√≥≈Çrzƒôdne GPS
    # - extract_landmarks(text): Identyfikuje punkty charakterystyczne
    # - extract_warnings(text): Rozpoznaje ostrze≈ºenia
    # - process_trail_description(description): G≈Ç√≥wna metoda analizy

################################################################################
# PLIK: analyzers/review_analyzer.py
# ≈öCIE≈ªKA: ./analyzers/review_analyzer.py
# ROZMIAR: ~383 linii
# OPIS: Analiza sentymentu i ekstrakcja informacji z recenzji u≈ºytkownik√≥w
################################################################################

# Klasa ReviewAnalyzer odpowiada za:
# - Analizƒô sentymentu (pozytywne/negatywne/neutralne)
# - Ekstrakcjƒô ocen numerycznych (gwiazdki, punkty, skale)
# - Identyfikacjƒô najczƒô≈õciej wspominanych aspekt√≥w
# - Wydobywanie dat i preferencji sezonowych
# - Analiza recenzji u≈ºytkownik√≥w tras

================================================================================
üíæ MODU≈Å DATABASE - BAZA DANYCH SQLITE
================================================================================

################################################################################
# PLIK: sql/schema.sql
# ≈öCIE≈ªKA: ./sql/schema.sql
# ROZMIAR: ~103 linii
# OPIS: Schema bazy danych SQLite z tabelami i indeksami
################################################################################

-- G≈Ç√≥wne tabele:
CREATE TABLE IF NOT EXISTS routes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    region TEXT,
    start_lat REAL NOT NULL,
    start_lon REAL NOT NULL,
    end_lat REAL NOT NULL,
    end_lon REAL NOT NULL,
    length_km REAL,
    elevation_gain INTEGER,
    difficulty INTEGER CHECK (difficulty BETWEEN 1 AND 5),
    terrain_type TEXT,
    tags TEXT,
    description TEXT,
    category TEXT DEFAULT 'sportowa',
    estimated_time REAL,
    user_rating REAL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS weather_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date DATE NOT NULL,
    location_lat REAL NOT NULL,
    location_lon REAL NOT NULL,
    avg_temp REAL,
    min_temp REAL,
    max_temp REAL,
    precipitation REAL,
    sunshine_hours REAL,
    cloud_cover INTEGER,
    wind_speed REAL,
    humidity INTEGER,
    UNIQUE(date, location_lat, location_lon)
);

-- Indeksy wydajno≈õci:
CREATE INDEX IF NOT EXISTS idx_routes_region ON routes(region);
CREATE INDEX IF NOT EXISTS idx_routes_difficulty ON routes(difficulty);
CREATE INDEX IF NOT EXISTS idx_weather_date ON weather_data(date);

################################################################################
# PLIK: database/database_manager.py
# ≈öCIE≈ªKA: ./database/database_manager.py
# ROZMIAR: ~348 linii
# OPIS: G≈Ç√≥wna klasa zarzƒÖdzania bazƒÖ danych SQLite
################################################################################

# Klasa DatabaseManager oferuje:
# - Inicjalizacjƒô bazy danych
# - Podstawowe operacje CRUD
# - ZarzƒÖdzanie po≈ÇƒÖczeniami
# - Walidacjƒô sp√≥jno≈õci danych
# - Backup i restore

################################################################################
# PLIK: database/migration_tool.py
# ≈öCIE≈ªKA: ./database/migration_tool.py
# ROZMIAR: ~220 linii
# OPIS: Narzƒôdzie do migracji danych z CSV/JSON do SQLite
################################################################################

# Klasa MigrationTool zapewnia:
# - JednorazowƒÖ migracjƒô z plik√≥w CSV/JSON
# - Walidacjƒô danych podczas importu
# - Raportowanie b≈Çƒôd√≥w migracji
# - Obs≈Çugƒô r√≥≈ºnych format√≥w danych

################################################################################
# PLIK: database/repositories/route_repository.py
# ≈öCIE≈ªKA: ./database/repositories/route_repository.py
# ROZMIAR: ~575 linii
# OPIS: Repozytorium do operacji na trasach w bazie danych
################################################################################

# Klasa RouteRepository oferuje:
# - Podstawowe operacje CRUD na trasach
# - Filtrowanie tras wed≈Çug parametr√≥w
# - Wyszukiwanie tras w promieniu od punktu
# - Statystyki tras

================================================================================
üìä MODU≈Å REPORTERS - GENEROWANIE RAPORT√ìW PDF I WYKRES√ìW
================================================================================

################################################################################
# PLIK: reporters/pdf_report_generator.py
# ≈öCIE≈ªKA: ./reporters/pdf_report_generator.py
# ROZMIAR: ~645 linii
# OPIS: Generowanie profesjonalnych raport√≥w PDF z wizualizacjami
################################################################################

# Klasa PDFReportGenerator zapewnia:
# - Tworzenie wielostronicowych raport√≥w PDF
# - Generowanie tabel por√≥wnawczych tras
# - Dodawanie nag≈Ç√≥wk√≥w, stopek i numeracji stron
# - Integracjƒô z wykresami z ChartGenerator
# - Sekcje: strona tytu≈Çowa, spis tre≈õci, podsumowanie, wykresy, szczeg√≥≈Çy tras

################################################################################
# PLIK: reporters/chart_generator.py
# ≈öCIE≈ªKA: ./reporters/chart_generator.py
# ROZMIAR: ~489 linii
# OPIS: Generowanie wykres√≥w i wizualizacji danych
################################################################################

# Klasa ChartGenerator oferuje:
# - Wykresy s≈Çupkowe por√≥wnujƒÖce parametry tras
# - Wykresy ko≈Çowe z rozk≈Çadem kategorii tras
# - Wykresy liniowe z profilami wysoko≈õciowymi
# - Mapy ciep≈Ça popularno≈õci tras w miesiƒÖcach
# - Wykresy radarowe oceniajƒÖce trasy pod r√≥≈ºnymi kryteriami

================================================================================
üåê MODU≈Å EXTRACTORS - POBIERANIE DANYCH Z INTERNETU
================================================================================

################################################################################
# PLIK: extractors/html_route_extractor.py
# ≈öCIE≈ªKA: ./extractors/html_route_extractor.py
# ROZMIAR: ~423 linii
# OPIS: Parsowanie stron internetowych z opisami tras
################################################################################

# Klasa HTMLRouteExtractor umo≈ºliwia:
# - Parsowanie r√≥≈ºnych struktur HTML
# - Ekstrakcjƒô strukturalnych informacji o trasach
# - Obs≈Çugƒô tabel z parametrami tras
# - Wydobywanie galerii zdjƒôƒá i map interaktywnych
# - Rozpoznawanie selektor√≥w: .route-params, .route-description, .user-review

################################################################################
# PLIK: extractors/web_data_collector.py
# ≈öCIE≈ªKA: ./extractors/web_data_collector.py
# ROZMIAR: ~582 linii
# OPIS: Automatyczne pobieranie danych z portali turystycznych
################################################################################

# Klasa WebDataCollector zapewnia:
# - Automatyczne pobieranie z popularnych portali (e-turysta, traseo)
# - Obs≈Çugƒô r√≥≈ºnych struktur HTML i format√≥w danych
# - Mechanizm cache'owania pobranych danych
# - Integracjƒô z API serwis√≥w pogodowych i turystycznych
# - Obs≈Çugƒô b≈Çƒôd√≥w sieciowych i timeout√≥w

================================================================================
üßÆ MODU≈Å UTILS - NARZƒòDZIA I POMOCNICZE FUNKCJE
================================================================================

################################################################################
# PLIK: utils/export_results.py
# ≈öCIE≈ªKA: ./utils/export_results.py
# ROZMIAR: ~120 linii
# OPIS: Eksport wynik√≥w do r√≥≈ºnych format√≥w (CSV, JSON, TXT)
################################################################################

################################################################################
# PLIK: utils/weather_utils.py
# ≈öCIE≈ªKA: ./utils/weather_utils.py
# ROZMIAR: ~200+ linii
# OPIS: Narzƒôdzia do analizy danych pogodowych i komfortu wƒôdr√≥wki
################################################################################

################################################################################
# PLIK: utils/trail_filter.py
# ≈öCIE≈ªKA: ./utils/trail_filter.py
# ROZMIAR: ~150+ linii
# OPIS: Filtrowanie tras wed≈Çug r√≥≈ºnych kryteri√≥w
################################################################################

================================================================================
üìÅ PLIKI DANYCH - PRZYK≈ÅADY STRUKTURY JSON
================================================================================

################################################################################
# PLIK: trails_data.json (PRZYK≈ÅAD - pierwsze 3 rekordy)
# ≈öCIE≈ªKA: ./trails_data.json
# ROZMIAR: ~10398 linii (~5000 tras)
# OPIS: Dane o trasach turystycznych w formacie JSON
################################################################################

[
  {
    "id": "4318608",
    "name": "Twierdza Wis≈Çouj≈õcie",
    "region": "Gda≈Ñsk",
    "coordinates": null,
    "length_km": 6.2,
    "elevation_m": 0.0,
    "difficulty": 1,
    "terrain_type": "mixed",
    "tags": []
  },
  {
    "id": "29178907",
    "name": "Skwer im. Anny Walentynowicz",
    "region": "Gda≈Ñsk",
    "coordinates": null,
    "length_km": 7.7,
    "elevation_m": 0.0,
    "difficulty": 1,
    "terrain_type": "mixed",
    "tags": []
  },
  {
    "id": "39518679",
    "name": "Brama Wy≈ºynna",
    "region": "Gda≈Ñsk",
    "coordinates": null,
    "length_km": 3.2,
    "elevation_m": 0.0,
    "difficulty": 1,
    "terrain_type": "historical",
    "tags": ["building"]
  }
]

# STRUKTURA DANYCH TRAS:
# - id: unikalny identyfikator
# - name: nazwa trasy
# - region: miasto/region (Gda≈Ñsk, Warszawa, Krak√≥w, Wroc≈Çaw)
# - coordinates: wsp√≥≈Çrzƒôdne GPS (mo≈ºe byƒá null)
# - length_km: d≈Çugo≈õƒá w kilometrach
# - elevation_m: przewy≈ºszenie w metrach
# - difficulty: poziom trudno≈õci (1-3)
# - terrain_type: typ terenu (mixed, historical, riverside, etc.)
# - tags: dodatkowe tagi opisujƒÖce trasƒô

================================================================================
üéØ PODSUMOWANIE ARCHITEKTURY PROJEKTU
================================================================================

G≈Å√ìWNE KOMPONENTY:
‚îú‚îÄ‚îÄ main.py (1549 linii) - G≈Ç√≥wna aplikacja konsolowa z menu
‚îú‚îÄ‚îÄ config.py (26 linii) - Konfiguracja systemu
‚îú‚îÄ‚îÄ analyzers/ - Analiza tekstu i recenzji (693 linii)
‚îÇ   ‚îú‚îÄ‚îÄ text_processor.py - Ekstrakcja informacji z opis√≥w tras
‚îÇ   ‚îî‚îÄ‚îÄ review_analyzer.py - Analiza sentymentu recenzji
‚îú‚îÄ‚îÄ database/ - Baza danych SQLite (1931 linii)
‚îÇ   ‚îú‚îÄ‚îÄ database_manager.py - ZarzƒÖdzanie bazƒÖ danych
‚îÇ   ‚îú‚îÄ‚îÄ migration_tool.py - Migracja z CSV/JSON
‚îÇ   ‚îî‚îÄ‚îÄ repositories/ - Repozytoria danych (3 pliki)
‚îú‚îÄ‚îÄ extractors/ - Pobieranie danych z internetu (1005 linii)
‚îÇ   ‚îú‚îÄ‚îÄ html_route_extractor.py - Parsowanie HTML
‚îÇ   ‚îî‚îÄ‚îÄ web_data_collector.py - Zbieranie danych z portali
‚îú‚îÄ‚îÄ reporters/ - Generowanie raport√≥w (1134 linii)
‚îÇ   ‚îú‚îÄ‚îÄ pdf_report_generator.py - Raporty PDF
‚îÇ   ‚îî‚îÄ‚îÄ chart_generator.py - Wykresy i wizualizacje
‚îú‚îÄ‚îÄ utils/ - Narzƒôdzia pomocnicze (800+ linii)
‚îú‚îÄ‚îÄ api/ - Interfejsy API
‚îú‚îÄ‚îÄ data_handlers/ - Obs≈Çuga danych tras i pogody
‚îî‚îÄ‚îÄ recommendation/ - Silnik rekomendacji

G≈Å√ìWNE FUNKCJONALNO≈öCI:
‚úÖ Rekomendacje tras z filtrowaniem
‚úÖ Analiza tekstu wyra≈ºeniami regularnymi
‚úÖ Analiza sentymentu recenzji
‚úÖ Baza danych SQLite z migracjƒÖ
‚úÖ Generowanie raport√≥w PDF z wykresami
‚úÖ Pobieranie danych z portali internetowych
‚úÖ Interfejs konsolowy z 11 opcjami menu
‚úÖ Export wynik√≥w (CSV, JSON, TXT)
‚úÖ Cache'owanie danych

TECHNOLOGIE:
- Python 3.8+
- SQLite (baza danych)
- ReportLab (generowanie PDF)
- Matplotlib/Seaborn (wykresy)
- BeautifulSoup (parsowanie HTML)
- Wyra≈ºenia regularne (analiza tekstu)

PLIKI DANYCH:
- trails_data.json (~5000 tras, 10398 linii)
- weather_data.json (dane pogodowe)
- sql/schema.sql (schema bazy danych, 103 linii)

≈ÅƒÑCZNA LICZBA LINII KODU: ~8000+ linii Python
≈ÅƒÑCZNA LICZBA PLIK√ìW PYTHON: 40 plik√≥w

================================================================================
üèÅ KONIEC PODSUMOWANIA - PROJEKT GOTOWY DO U≈ªYCIA
================================================================================ 